"use strict";(self.webpackChunktaskbox=self.webpackChunktaskbox||[]).push([[276],{"./node_modules/@ngxs/store/fesm2015/ngxs-store-operators.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isStateOperator(value){return"function"==typeof value}function isPredicate(value){return"function"==typeof value}function isNumber(value){return"number"==typeof value}function invalidIndex(index){return Number.isNaN(index)||-1===index}function patch(patchObject){return function patchStateOperator(existing){let clone=null;for(const k in patchObject){const newValue=patchObject[k],existingPropValue=null==existing?void 0:existing[k],newPropValue=isStateOperator(newValue)?newValue(existingPropValue):newValue;newPropValue!==existingPropValue&&(clone||(clone=Object.assign({},existing)),clone[k]=newPropValue)}return clone||existing}}function updateItem(selector,operatorOrValue){return function updateItemOperator(existing){let index=-1;if(isPredicate(selector)?index=existing.findIndex(selector):isNumber(selector)&&(index=selector),invalidIndex(index))return existing;let value=null;const theOperatorOrValue=operatorOrValue;if(value=isStateOperator(theOperatorOrValue)?theOperatorOrValue(existing[index]):theOperatorOrValue,value===existing[index])return existing;const clone=existing.slice();return clone[index]=value,clone}}__webpack_require__.d(__webpack_exports__,{F6:()=>patch,Sj:()=>isStateOperator,fk:()=>updateItem})},"./node_modules/@ngxs/store/fesm2015/ngxs-store.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{rc:()=>Action,rK:()=>NgxsModule,MD:()=>Selector,Uw:()=>State,il:()=>Store});var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},ReplaySubject=function(_super){function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){void 0===_bufferSize&&(_bufferSize=1/0),void 0===_windowTime&&(_windowTime=1/0),void 0===_timestampProvider&&(_timestampProvider=dateTimestampProvider);var _this=_super.call(this)||this;return _this._bufferSize=_bufferSize,_this._windowTime=_windowTime,_this._timestampProvider=_timestampProvider,_this._buffer=[],_this._infiniteTimeWindow=!0,_this._infiniteTimeWindow=_windowTime===1/0,_this._bufferSize=Math.max(1,_bufferSize),_this._windowTime=Math.max(1,_windowTime),_this}return(0,tslib_es6.C6)(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed(),this._trimBuffer();for(var subscription=this._innerSubscribe(subscriber),_infiniteTimeWindow=this._infiniteTimeWindow,copy=this._buffer.slice(),i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription},ReplaySubject.prototype._trimBuffer=function(){var _bufferSize=this._bufferSize,_timestampProvider=this._timestampProvider,_buffer=this._buffer,_infiniteTimeWindow=this._infiniteTimeWindow,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){for(var now=_timestampProvider.now(),last=0,i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}},ReplaySubject}(Subject.B);class NgxsBootstrapper{constructor(){this.bootstrap$=new ReplaySubject(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}function defaultEqualityCheck(a,b){return a===b}function memoize(func,equalityCheck=defaultEqualityCheck){let lastArgs=null,lastResult=null;function memoized(){return function areArgumentsShallowlyEqual(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;const length=prev.length;for(let i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}return memoized.reset=function(){lastArgs=null,lastResult=null},memoized}NgxsBootstrapper.ɵfac=function NgxsBootstrapper_Factory(t){return new(t||NgxsBootstrapper)},NgxsBootstrapper.ɵprov=core["ɵɵdefineInjectable"]({token:NgxsBootstrapper,factory:NgxsBootstrapper.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsBootstrapper,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);class InitialState{static set(state){this._value=state}static pop(){const state=this._value;return this._value={},state}}InitialState._value={};const INITIAL_STATE_TOKEN=new core.InjectionToken("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>InitialState.pop()}),ɵNGXS_STATE_FACTORY=new core.InjectionToken("ɵNGXS_STATE_FACTORY"),ɵNGXS_STATE_CONTEXT_FACTORY=new core.InjectionToken("ɵNGXS_STATE_CONTEXT_FACTORY");var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),isArray=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(args){if(1===args.length){var first_1=args[0];if(isArray(first_1))return{args:first_1,keys:null};if(function isPOJO(obj){return obj&&"object"==typeof obj&&getPrototypeOf(obj)===objectProto}(first_1)){var keys=getKeys(first_1);return{args:keys.map((function(key){return first_1[key]})),keys}}}return{args,keys:null}}var innerFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),util_args=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/args.js"),OperatorSubscriber=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),operators_map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),mapOneOrManyArgs_isArray=Array.isArray;function mapOneOrManyArgs(fn){return(0,operators_map.T)((function(args){return function callOrApply(fn,args){return mapOneOrManyArgs_isArray(args)?fn.apply(void 0,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(args))):fn(args)}(fn,args)}))}function forkJoin(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var resultSelector=(0,util_args.ms)(args),_a=argsArgArrayOrObject(args),sources=_a.args,keys=_a.keys,result=new Observable.c((function(subscriber){var length=sources.length;if(length)for(var values=new Array(length),remainingCompletions=length,remainingEmissions=length,_loop_1=function(sourceIndex){var hasValue=!1;(0,innerFrom.Tg)(sources[sourceIndex]).subscribe((0,OperatorSubscriber._)(subscriber,(function(value){hasValue||(hasValue=!0,remainingEmissions--),values[sourceIndex]=value}),(function(){return remainingCompletions--}),void 0,(function(){remainingCompletions&&hasValue||(remainingEmissions||subscriber.next(keys?function createObject(keys,values){return keys.reduce((function(result,key,i){return result[key]=values[i],result}),{})}(keys,values):values),subscriber.complete())})))},sourceIndex=0;sourceIndex<length;sourceIndex++)_loop_1(sourceIndex);else subscriber.complete()}));return resultSelector?result.pipe(mapOneOrManyArgs(resultSelector)):result}var isFunction=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js");function throwError(errorOrErrorFactory,scheduler){var errorFactory=(0,isFunction.T)(errorOrErrorFactory)?errorOrErrorFactory:function(){return errorOrErrorFactory},init=function(subscriber){return subscriber.error(errorFactory())};return new Observable.c(scheduler?function(subscriber){return scheduler.schedule(init,0,subscriber)}:init)}var empty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),from=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/from.js");function isObservable(obj){return!!obj&&(obj instanceof Observable.c||(0,isFunction.T)(obj.lift)&&(0,isFunction.T)(obj.subscribe))}var filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),Subscriber=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscriber.js"),lift=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js");function share(options){void 0===options&&(options={});var _a=options.connector,connector=void 0===_a?function(){return new Subject.B}:_a,_b=options.resetOnError,resetOnError=void 0===_b||_b,_c=options.resetOnComplete,resetOnComplete=void 0===_c||_c,_d=options.resetOnRefCountZero,resetOnRefCountZero=void 0===_d||_d;return function(wrapperSource){var connection,resetConnection,subject,refCount=0,hasCompleted=!1,hasErrored=!1,cancelReset=function(){null==resetConnection||resetConnection.unsubscribe(),resetConnection=void 0},reset=function(){cancelReset(),connection=subject=void 0,hasCompleted=hasErrored=!1},resetAndUnsubscribe=function(){var conn=connection;reset(),null==conn||conn.unsubscribe()};return(0,lift.N)((function(source,subscriber){refCount++,hasErrored||hasCompleted||cancelReset();var dest=subject=null!=subject?subject:connector();subscriber.add((function(){0!==--refCount||hasErrored||hasCompleted||(resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero))})),dest.subscribe(subscriber),!connection&&refCount>0&&(connection=new Subscriber.Ms({next:function(value){return dest.next(value)},error:function(err){hasErrored=!0,cancelReset(),resetConnection=handleReset(reset,resetOnError,err),dest.error(err)},complete:function(){hasCompleted=!0,cancelReset(),resetConnection=handleReset(reset,resetOnComplete),dest.complete()}}),(0,innerFrom.Tg)(source).subscribe(connection))}))(wrapperSource)}}function handleReset(reset,on){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];if(!0!==on){if(!1!==on){var onSubscriber=new Subscriber.Ms({next:function(){onSubscriber.unsubscribe(),reset()}});return(0,innerFrom.Tg)(on.apply(void 0,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(args)))).subscribe(onSubscriber)}}else reset()}function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,share({connector:function(){return new ReplaySubject(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}var take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js");function exhaustMap(project,resultSelector){return resultSelector?function(source){return source.pipe(exhaustMap((function(a,i){return(0,innerFrom.Tg)(project(a,i)).pipe((0,operators_map.T)((function(b,ii){return resultSelector(a,b,i,ii)})))})))}:(0,lift.N)((function(source,subscriber){var index=0,innerSub=null,isComplete=!1;source.subscribe((0,OperatorSubscriber._)(subscriber,(function(outerValue){innerSub||(innerSub=(0,OperatorSubscriber._)(subscriber,void 0,(function(){innerSub=null,isComplete&&subscriber.complete()})),(0,innerFrom.Tg)(project(outerValue,index++)).subscribe(innerSub))}),(function(){isComplete=!0,!innerSub&&subscriber.complete()})))}))}var mergeMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),defaultIfEmpty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");function catchError(selector){return(0,lift.N)((function(source,subscriber){var handledResult,innerSub=null,syncUnsub=!1;innerSub=source.subscribe((0,OperatorSubscriber._)(subscriber,void 0,void 0,(function(err){handledResult=(0,innerFrom.Tg)(selector(err,catchError(selector)(source))),innerSub?(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber)):syncUnsub=!0}))),syncUnsub&&(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber))}))}var noop=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js");function takeUntil(notifier){return(0,lift.N)((function(source,subscriber){(0,innerFrom.Tg)(notifier).subscribe((0,OperatorSubscriber._)(subscriber,(function(){return subscriber.complete()}),noop.l)),!subscriber.closed&&source.subscribe(subscriber)}))}var identity=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/identity.js");function defaultCompare(a,b){return a===b}var tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js");function concatAll(){return function mergeAll(concurrent){return void 0===concurrent&&(concurrent=1/0),(0,mergeMap.Z)(identity.D,concurrent)}(1)}function concat(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return concatAll()((0,from.H)(args,(0,util_args.lI)(args)))}function startWith(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];var scheduler=(0,util_args.lI)(values);return(0,lift.N)((function(source,subscriber){(scheduler?concat(values,source,scheduler):concat(values,source)).subscribe(subscriber)}))}var ngxs_store_operators=__webpack_require__("./node_modules/@ngxs/store/fesm2015/ngxs-store-operators.js");function getActionTypeFromInstance(action){return action.constructor&&action.constructor.type?action.constructor.type:action.type}const setValue=(obj,prop,val)=>{obj=Object.assign({},obj);const split=prop.split("."),lastIndex=split.length-1;return split.reduce(((acc,part,index)=>(acc[part]=index===lastIndex?val:Array.isArray(acc[part])?acc[part].slice():Object.assign({},acc[part]),acc&&acc[part])),obj),obj},getValue=(obj,prop)=>prop.split(".").reduce(((acc,part)=>acc&&acc[part]),obj),isObject$1=item=>item&&"object"==typeof item&&!Array.isArray(item),mergeDeep=(base,...sources)=>{if(!sources.length)return base;const source=sources.shift();if(isObject$1(base)&&isObject$1(source))for(const key in source)isObject$1(source[key])?(base[key]||Object.assign(base,{[key]:{}}),mergeDeep(base[key],source[key])):Object.assign(base,{[key]:source[key]});return mergeDeep(base,...sources)};class DispatchOutsideZoneNgxsExecutionStrategy{constructor(_ngZone,_platformId){this._ngZone=_ngZone,this._platformId=_platformId,("undefined"==typeof ngDevMode||ngDevMode)&&function verifyZoneIsNotNooped(ngZone){if(ngZone instanceof core.NgZone)return;console.warn("Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })")}(_ngZone)}enter(func){return(0,common.isPlatformServer)(this._platformId)?this.runInsideAngular(func):this.runOutsideAngular(func)}leave(func){return this.runInsideAngular(func)}runInsideAngular(func){return core.NgZone.isInAngularZone()?func():this._ngZone.run(func)}runOutsideAngular(func){return core.NgZone.isInAngularZone()?this._ngZone.runOutsideAngular(func):func()}}DispatchOutsideZoneNgxsExecutionStrategy.ɵfac=function DispatchOutsideZoneNgxsExecutionStrategy_Factory(t){return new(t||DispatchOutsideZoneNgxsExecutionStrategy)(core["ɵɵinject"](core.NgZone),core["ɵɵinject"](core.PLATFORM_ID))},DispatchOutsideZoneNgxsExecutionStrategy.ɵprov=core["ɵɵdefineInjectable"]({token:DispatchOutsideZoneNgxsExecutionStrategy,factory:DispatchOutsideZoneNgxsExecutionStrategy.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](DispatchOutsideZoneNgxsExecutionStrategy,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:core.NgZone},{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]}]}),null);const ROOT_OPTIONS=new core.InjectionToken("ROOT_OPTIONS"),ROOT_STATE_TOKEN=new core.InjectionToken("ROOT_STATE_TOKEN"),FEATURE_STATE_TOKEN=new core.InjectionToken("FEATURE_STATE_TOKEN"),NGXS_PLUGINS=new core.InjectionToken("NGXS_PLUGINS"),META_KEY="NGXS_META",META_OPTIONS_KEY="NGXS_OPTIONS_META",SELECTOR_META_KEY="NGXS_SELECTOR_META";class NgxsConfig{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=DispatchOutsideZoneNgxsExecutionStrategy}}NgxsConfig.ɵfac=function NgxsConfig_Factory(t){return new(t||NgxsConfig)},NgxsConfig.ɵprov=core["ɵɵdefineInjectable"]({token:NgxsConfig,factory:function NgxsConfig_Factory(t){let r=null;var options;return t?r=new t:(options=core["ɵɵinject"](ROOT_OPTIONS),r=mergeDeep(new NgxsConfig,options)),r},providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsConfig,[{type:core.Injectable,args:[{providedIn:"root",useFactory:options=>mergeDeep(new NgxsConfig,options),deps:[ROOT_OPTIONS]}]}],(function(){return[]}),null);class NgxsSimpleChange{constructor(previousValue,currentValue,firstChange){this.previousValue=previousValue,this.currentValue=currentValue,this.firstChange=firstChange}}class NoopNgxsExecutionStrategy{enter(func){return func()}leave(func){return func()}}NoopNgxsExecutionStrategy.ɵfac=function NoopNgxsExecutionStrategy_Factory(t){return new(t||NoopNgxsExecutionStrategy)},NoopNgxsExecutionStrategy.ɵprov=core["ɵɵdefineInjectable"]({token:NoopNgxsExecutionStrategy,factory:NoopNgxsExecutionStrategy.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NoopNgxsExecutionStrategy,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);const USER_PROVIDED_NGXS_EXECUTION_STRATEGY=new core.InjectionToken("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),NGXS_EXECUTION_STRATEGY=new core.InjectionToken("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const injector=(0,core.inject)(core.INJECTOR),executionStrategy=injector.get(USER_PROVIDED_NGXS_EXECUTION_STRATEGY);return executionStrategy?injector.get(executionStrategy):injector.get(void 0!==core["ɵglobal"].Zone?DispatchOutsideZoneNgxsExecutionStrategy:NoopNgxsExecutionStrategy)}});function ensureStoreMetadata$1(target){if(!target.hasOwnProperty(META_KEY)){const defaultMetadata={name:null,actions:{},defaults:{},path:null,makeRootSelector:context=>context.getStateGetter(defaultMetadata.name),children:[]};Object.defineProperty(target,META_KEY,{value:defaultMetadata})}return getStoreMetadata$1(target)}function getStoreMetadata$1(target){return target[META_KEY]}function ensureSelectorMetadata$1(target){if(!target.hasOwnProperty(SELECTOR_META_KEY)){const defaultMetadata={makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})};Object.defineProperty(target,SELECTOR_META_KEY,{value:defaultMetadata})}return getSelectorMetadata$1(target)}function getSelectorMetadata$1(target){return target[SELECTOR_META_KEY]}function propGetter(paths,config){return config&&config.compatibility&&config.compatibility.strictContentSecurityPolicy?function compliantPropGetter(paths){const copyOfPaths=paths.slice();return obj=>copyOfPaths.reduce(((acc,part)=>acc&&acc[part]),obj)}(paths):function fastPropGetter(paths){const segments=paths;let seg="store."+segments[0],i=0;const l=segments.length;let expr=seg;for(;++i<l;)expr=expr+" && "+(seg=seg+"."+segments[i]);return new Function("store","return "+expr+";")}(paths)}function ofActionDispatched(...allowedTypes){return ofActionOperator(allowedTypes,["DISPATCHED"])}function ofActionOperator(allowedTypes,statuses,mapOperator=mapAction){const allowedMap=function createAllowedActionTypesMap(types){return types.reduce(((filterMap,klass)=>(filterMap[getActionTypeFromInstance(klass)]=!0,filterMap)),{})}(allowedTypes),allowedStatusMap=statuses&&function createAllowedStatusesMap(statuses){return statuses.reduce(((filterMap,status)=>(filterMap[status]=!0,filterMap)),{})}(statuses);return function(o){return o.pipe(function filterStatus(allowedTypes,allowedStatuses){return(0,filter.p)((ctx=>{const actionType=getActionTypeFromInstance(ctx.action),typeMatch=allowedTypes[actionType],statusMatch=!allowedStatuses||allowedStatuses[ctx.status];return typeMatch&&statusMatch}))}(allowedMap,allowedStatusMap),mapOperator())}}function mapAction(){return(0,operators_map.T)((ctx=>ctx.action))}function leaveNgxs(ngxsExecutionStrategy){return source=>new Observable.c((sink=>source.subscribe({next(value){ngxsExecutionStrategy.leave((()=>sink.next(value)))},error(error){ngxsExecutionStrategy.leave((()=>sink.error(error)))},complete(){ngxsExecutionStrategy.leave((()=>sink.complete()))}})))}class InternalNgxsExecutionStrategy{constructor(_executionStrategy){this._executionStrategy=_executionStrategy}enter(func){return this._executionStrategy.enter(func)}leave(func){return this._executionStrategy.leave(func)}}function orderedQueueOperation(operation){const callsQueue=[];let busyPushingNext=!1;return function callOperation(...args){if(busyPushingNext)callsQueue.unshift(args);else{for(busyPushingNext=!0,operation(...args);callsQueue.length>0;){const nextCallArgs=callsQueue.pop();nextCallArgs&&operation(...nextCallArgs)}busyPushingNext=!1}}}InternalNgxsExecutionStrategy.ɵfac=function InternalNgxsExecutionStrategy_Factory(t){return new(t||InternalNgxsExecutionStrategy)(core["ɵɵinject"](NGXS_EXECUTION_STRATEGY))},InternalNgxsExecutionStrategy.ɵprov=core["ɵɵdefineInjectable"]({token:InternalNgxsExecutionStrategy,factory:InternalNgxsExecutionStrategy.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalNgxsExecutionStrategy,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[NGXS_EXECUTION_STRATEGY]}]}]}),null);class OrderedSubject extends Subject.B{constructor(){super(...arguments),this._orderedNext=orderedQueueOperation((value=>super.next(value)))}next(value){this._orderedNext(value)}}class OrderedBehaviorSubject extends BehaviorSubject.t{constructor(value){super(value),this._orderedNext=orderedQueueOperation((value=>super.next(value))),this._currentValue=value}getValue(){return this._currentValue}next(value){this._currentValue=value,this._orderedNext(value)}}class InternalActions extends OrderedSubject{ngOnDestroy(){this.complete()}}InternalActions.ɵfac=(()=>{let ɵInternalActions_BaseFactory;return function InternalActions_Factory(t){return(ɵInternalActions_BaseFactory||(ɵInternalActions_BaseFactory=core["ɵɵgetInheritedFactory"](InternalActions)))(t||InternalActions)}})(),InternalActions.ɵprov=core["ɵɵdefineInjectable"]({token:InternalActions,factory:InternalActions.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalActions,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);class Actions extends Observable.c{constructor(internalActions$,internalExecutionStrategy){const sharedInternalActions$=internalActions$.pipe(leaveNgxs(internalExecutionStrategy),share());super((observer=>{const childSubscription=sharedInternalActions$.subscribe({next:ctx=>observer.next(ctx),error:error=>observer.error(error),complete:()=>observer.complete()});observer.add(childSubscription)}))}}Actions.ɵfac=function Actions_Factory(t){return new(t||Actions)(core["ɵɵinject"](InternalActions),core["ɵɵinject"](InternalNgxsExecutionStrategy))},Actions.ɵprov=core["ɵɵdefineInjectable"]({token:Actions,factory:Actions.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](Actions,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:InternalActions},{type:InternalNgxsExecutionStrategy}]}),null);const compose=funcs=>(...args)=>funcs.shift()(...args,((...nextArgs)=>compose(funcs)(...nextArgs)));class InternalErrorReporter{constructor(_injector){this._injector=_injector,this._errorHandler=null}reportErrorSafely(error){null===this._errorHandler&&(this._errorHandler=this._injector.get(core.ErrorHandler));try{this._errorHandler.handleError(error)}catch(_a){}}}InternalErrorReporter.ɵfac=function InternalErrorReporter_Factory(t){return new(t||InternalErrorReporter)(core["ɵɵinject"](core.Injector))},InternalErrorReporter.ɵprov=core["ɵɵdefineInjectable"]({token:InternalErrorReporter,factory:InternalErrorReporter.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalErrorReporter,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:core.Injector}]}),null);class StateStream extends OrderedBehaviorSubject{constructor(){super({})}ngOnDestroy(){this.complete()}}StateStream.ɵfac=function StateStream_Factory(t){return new(t||StateStream)},StateStream.ɵprov=core["ɵɵdefineInjectable"]({token:StateStream,factory:StateStream.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](StateStream,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class PluginManager{constructor(_parentManager,_pluginHandlers){this._parentManager=_parentManager,this._pluginHandlers=_pluginHandlers,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const pluginHandlers=this.getPluginHandlers();this.rootPlugins.push(...pluginHandlers)}getPluginHandlers(){return(this._pluginHandlers||[]).map((plugin=>plugin.handle?plugin.handle.bind(plugin):plugin))}}PluginManager.ɵfac=function PluginManager_Factory(t){return new(t||PluginManager)(core["ɵɵinject"](PluginManager,12),core["ɵɵinject"](NGXS_PLUGINS,8))},PluginManager.ɵprov=core["ɵɵdefineInjectable"]({token:PluginManager,factory:PluginManager.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](PluginManager,[{type:core.Injectable}],(function(){return[{type:PluginManager,decorators:[{type:core.Optional},{type:core.SkipSelf}]},{type:void 0,decorators:[{type:core.Inject,args:[NGXS_PLUGINS]},{type:core.Optional}]}]}),null);class InternalDispatchedActionResults extends Subject.B{}InternalDispatchedActionResults.ɵfac=(()=>{let ɵInternalDispatchedActionResults_BaseFactory;return function InternalDispatchedActionResults_Factory(t){return(ɵInternalDispatchedActionResults_BaseFactory||(ɵInternalDispatchedActionResults_BaseFactory=core["ɵɵgetInheritedFactory"](InternalDispatchedActionResults)))(t||InternalDispatchedActionResults)}})(),InternalDispatchedActionResults.ɵprov=core["ɵɵdefineInjectable"]({token:InternalDispatchedActionResults,factory:InternalDispatchedActionResults.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalDispatchedActionResults,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);class InternalDispatcher{constructor(_actions,_actionResults,_pluginManager,_stateStream,_ngxsExecutionStrategy,_internalErrorReporter){this._actions=_actions,this._actionResults=_actionResults,this._pluginManager=_pluginManager,this._stateStream=_stateStream,this._ngxsExecutionStrategy=_ngxsExecutionStrategy,this._internalErrorReporter=_internalErrorReporter}dispatch(actionOrActions){return this._ngxsExecutionStrategy.enter((()=>this.dispatchByEvents(actionOrActions))).pipe(function ngxsErrorHandler(internalErrorReporter,ngxsExecutionStrategy){return source=>{let subscribed=!1;return source.subscribe({error:error=>{ngxsExecutionStrategy.enter((()=>Promise.resolve().then((()=>{subscribed||ngxsExecutionStrategy.leave((()=>internalErrorReporter.reportErrorSafely(error)))}))))}}),new Observable.c((subscriber=>(subscribed=!0,source.pipe(leaveNgxs(ngxsExecutionStrategy)).subscribe(subscriber))))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(actionOrActions){return Array.isArray(actionOrActions)?0===actionOrActions.length?(0,of.of)(this._stateStream.getValue()):forkJoin(actionOrActions.map((action=>this.dispatchSingle(action)))):this.dispatchSingle(actionOrActions)}dispatchSingle(action){if("undefined"==typeof ngDevMode||ngDevMode){if(!getActionTypeFromInstance(action)){return throwError(new Error(`This action doesn't have a type property: ${action.constructor.name}`))}}const prevState=this._stateStream.getValue(),plugins=this._pluginManager.plugins;return compose([...plugins,(nextState,nextAction)=>{nextState!==prevState&&this._stateStream.next(nextState);const actionResult$=this.getActionResultStream(nextAction);return actionResult$.subscribe((ctx=>this._actions.next(ctx))),this._actions.next({action:nextAction,status:"DISPATCHED"}),this.createDispatchObservable(actionResult$)}])(prevState,action).pipe(shareReplay())}getActionResultStream(action){return this._actionResults.pipe((0,filter.p)((ctx=>ctx.action===action&&"DISPATCHED"!==ctx.status)),(0,take.s)(1),shareReplay())}createDispatchObservable(actionResult$){return actionResult$.pipe(exhaustMap((ctx=>{switch(ctx.status){case"SUCCESSFUL":return(0,of.of)(this._stateStream.getValue());case"ERRORED":return throwError(ctx.error);default:return empty.w}}))).pipe(shareReplay())}}InternalDispatcher.ɵfac=function InternalDispatcher_Factory(t){return new(t||InternalDispatcher)(core["ɵɵinject"](InternalActions),core["ɵɵinject"](InternalDispatchedActionResults),core["ɵɵinject"](PluginManager),core["ɵɵinject"](StateStream),core["ɵɵinject"](InternalNgxsExecutionStrategy),core["ɵɵinject"](InternalErrorReporter))},InternalDispatcher.ɵprov=core["ɵɵdefineInjectable"]({token:InternalDispatcher,factory:InternalDispatcher.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalDispatcher,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:InternalActions},{type:InternalDispatchedActionResults},{type:PluginManager},{type:StateStream},{type:InternalNgxsExecutionStrategy},{type:InternalErrorReporter}]}),null);const deepFreeze=o=>{Object.freeze(o);const oIsFunction="function"==typeof o,hasOwnProp=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(o).forEach((function(prop){!hasOwnProp.call(o,prop)||oIsFunction&&("caller"===prop||"callee"===prop||"arguments"===prop)||null===o[prop]||"object"!=typeof o[prop]&&"function"!=typeof o[prop]||Object.isFrozen(o[prop])||deepFreeze(o[prop])})),o};class InternalStateOperations{constructor(_stateStream,_dispatcher,_config){this._stateStream=_stateStream,this._dispatcher=_dispatcher,this._config=_config}getRootStateOperations(){const rootStateOperations={getState:()=>this._stateStream.getValue(),setState:newState=>this._stateStream.next(newState),dispatch:actionOrActions=>this._dispatcher.dispatch(actionOrActions)};return("undefined"==typeof ngDevMode||ngDevMode)&&this._config.developmentMode?function ensureStateAndActionsAreImmutable(root){return{getState:()=>root.getState(),setState:value=>{const frozenValue=deepFreeze(value);return root.setState(frozenValue)},dispatch:actions=>root.dispatch(actions)}}(rootStateOperations):rootStateOperations}setStateToTheCurrentWithNew(results){const stateOperations=this.getRootStateOperations(),currentState=stateOperations.getState();stateOperations.setState(Object.assign(Object.assign({},currentState),results.defaults))}}function simplePatch(value){return existingState=>{("undefined"==typeof ngDevMode||ngDevMode)&&(Array.isArray(value)?function throwPatchingArrayError(){throw new Error("Patching arrays is not supported.")}():"object"!=typeof value&&function throwPatchingPrimitiveError(){throw new Error("Patching primitives is not supported.")}());const newState=Object.assign({},existingState);for(const key in value)newState[key]=value[key];return newState}}InternalStateOperations.ɵfac=function InternalStateOperations_Factory(t){return new(t||InternalStateOperations)(core["ɵɵinject"](StateStream),core["ɵɵinject"](InternalDispatcher),core["ɵɵinject"](NgxsConfig))},InternalStateOperations.ɵprov=core["ɵɵdefineInjectable"]({token:InternalStateOperations,factory:InternalStateOperations.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](InternalStateOperations,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:StateStream},{type:InternalDispatcher},{type:NgxsConfig}]}),null);class StateContextFactory{constructor(_internalStateOperations){this._internalStateOperations=_internalStateOperations}createStateContext(mappedStore){const root=this._internalStateOperations.getRootStateOperations();return{getState:()=>getState(root.getState(),mappedStore.path),patchState(val){const currentAppState=root.getState(),patchOperator=simplePatch(val);return setStateFromOperator(root,currentAppState,patchOperator,mappedStore.path)},setState(val){const currentAppState=root.getState();return(0,ngxs_store_operators.Sj)(val)?setStateFromOperator(root,currentAppState,val,mappedStore.path):setStateValue(root,currentAppState,val,mappedStore.path)},dispatch:actions=>root.dispatch(actions)}}}function setStateValue(root,currentAppState,newValue,path){const newAppState=setValue(currentAppState,path,newValue);return root.setState(newAppState),newAppState}function setStateFromOperator(root,currentAppState,stateOperator,path){return setStateValue(root,currentAppState,stateOperator(getState(currentAppState,path)),path)}function getState(currentAppState,path){return getValue(currentAppState,path)}StateContextFactory.ɵfac=function StateContextFactory_Factory(t){return new(t||StateContextFactory)(core["ɵɵinject"](InternalStateOperations))},StateContextFactory.ɵprov=core["ɵɵdefineInjectable"]({token:StateContextFactory,factory:StateContextFactory.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](StateContextFactory,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:InternalStateOperations}]}),null);const stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");function ensureStateNameIsValid(name){name?stateNameRegex.test(name)||function throwStateNameError(name){throw new Error(`${name} is not a valid state name. It needs to be a valid object property name.`)}(name):function throwStateNamePropertyError(){throw new Error("States must register a 'name' property.")}()}function ensureStateNameIsUnique(stateName,state,statesByName){const existingState=statesByName[stateName];existingState&&existingState!==state&&function throwStateUniqueError(current,newName,oldName){throw new Error(`State name '${current}' from ${newName} already exists in ${oldName}.`)}(stateName,state.name,existingState.name)}function ensureStatesAreDecorated(stateClasses){stateClasses.forEach((stateClass=>{getStoreMetadata$1(stateClass)||function throwStateDecoratorError(name){throw new Error(`States must be decorated with @State() decorator, but "${name}" isn't.`)}(stateClass.name)}))}function ensureStateClassIsInjectable(stateClass){(function jit_hasInjectableAnnotation(stateClass){const annotations=stateClass.__annotations__||[];return annotations.some((annotation=>"Injectable"===(null==annotation?void 0:annotation.ngMetadataName)))})(stateClass)||function aot_hasNgInjectableDef(stateClass){return!!stateClass.ɵprov}(stateClass)||console.warn(function getUndecoratedStateInIvyWarningMessage(name){return`'${name}' class should be decorated with @Injectable() right after the @State() decorator`}(stateClass.name))}class InitState{}InitState.type="@@INIT";class UpdateState{constructor(addedStates){this.addedStates=addedStates}}UpdateState.type="@@UPDATE_STATE";const NGXS_DEVELOPMENT_OPTIONS=new core.InjectionToken("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});class NgxsUnhandledActionsLogger{constructor(options){this._ignoredActions=new Set([InitState.type,UpdateState.type]),"object"==typeof options.warnOnUnhandledActions&&this.ignoreActions(...options.warnOnUnhandledActions.ignore)}ignoreActions(...actions){for(const action of actions)this._ignoredActions.add(action.type)}warn(action){Array.from(this._ignoredActions).some((type=>type===getActionTypeFromInstance(action)))||(action=action.constructor&&"Object"!==action.constructor.name?action.constructor.name:action.type,console.warn(`The ${action} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}}NgxsUnhandledActionsLogger.ɵfac=function NgxsUnhandledActionsLogger_Factory(t){return new(t||NgxsUnhandledActionsLogger)(core["ɵɵinject"](NGXS_DEVELOPMENT_OPTIONS))},NgxsUnhandledActionsLogger.ɵprov=core["ɵɵdefineInjectable"]({token:NgxsUnhandledActionsLogger,factory:NgxsUnhandledActionsLogger.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsUnhandledActionsLogger,[{type:core.Injectable}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[NGXS_DEVELOPMENT_OPTIONS]}]}]}),null);const NG_DEV_MODE="undefined"==typeof ngDevMode||ngDevMode;class StateFactory{constructor(_injector,_config,_parentFactory,_actions,_actionResults,_stateContextFactory,_initialState){this._injector=_injector,this._config=_config,this._parentFactory=_parentFactory,this._actions=_actions,this._actionResults=_actionResults,this._stateContextFactory=_stateContextFactory,this._initialState=_initialState,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=memoize((()=>{const stateFactory=this;function resolveGetter(key){const path=stateFactory.statePaths[key];return path?propGetter(path.split("."),stateFactory._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(key){let getter=resolveGetter(key);return getter||((...args)=>(getter||(getter=resolveGetter(key)),getter?getter(...args):void 0))},getSelectorOptions(localOptions){const globalSelectorOptions=stateFactory._config.selectorOptions;return Object.assign(Object.assign({},globalSelectorOptions),localOptions||{})}}}))}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(defaults){let value=defaults;return Array.isArray(defaults)?value=defaults.slice():!function isObject(obj){return"object"==typeof obj&&null!==obj||"function"==typeof obj}(defaults)?void 0===defaults&&(value={}):value=Object.assign({},defaults),value}ngOnDestroy(){var _a;null===(_a=this._actionsSubscription)||void 0===_a||_a.unsubscribe()}add(stateClasses){NG_DEV_MODE&&ensureStatesAreDecorated(stateClasses);const{newStates}=this.addToStatesMap(stateClasses);if(!newStates.length)return[];const stateGraph=function buildGraph(stateClasses){const findName=stateClass=>{const meta=stateClasses.find((g=>g===stateClass));if(("undefined"==typeof ngDevMode||ngDevMode)&&!meta)throw new Error(`Child state not found: ${stateClass}. \r\nYou may have forgotten to add states to module`);return meta[META_KEY].name};return stateClasses.reduce(((result,stateClass)=>{const{name,children}=stateClass[META_KEY];return result[name]=(children||[]).map(findName),result}),{})}(newStates),sortedStates=function topologicalSort(graph){const sorted=[],visited={},visit=(name,ancestors=[])=>{Array.isArray(ancestors)||(ancestors=[]),ancestors.push(name),visited[name]=!0,graph[name].forEach((dep=>{if(("undefined"==typeof ngDevMode||ngDevMode)&&ancestors.indexOf(dep)>=0)throw new Error(`Circular dependency '${dep}' is required by '${name}': ${ancestors.join(" -> ")}`);visited[dep]||visit(dep,ancestors.slice(0))})),sorted.indexOf(name)<0&&sorted.push(name)};return Object.keys(graph).forEach((k=>visit(k))),sorted.reverse()}(stateGraph),paths=function findFullParentPath(obj,newObj={}){const visit=(child,keyToFind)=>{for(const key in child)if(child.hasOwnProperty(key)&&child[key].indexOf(keyToFind)>=0){const parent=visit(child,key);return null!==parent?`${parent}.${key}`:key}return null};for(const key in obj)if(obj.hasOwnProperty(key)){const parent=visit(obj,key);newObj[key]=parent?`${parent}.${key}`:key}return newObj}(stateGraph),nameGraph=function nameToState(states){return states.reduce(((result,stateClass)=>(result[stateClass[META_KEY].name]=stateClass,result)),{})}(newStates),bootstrappedStores=[];for(const name of sortedStates){const stateClass=nameGraph[name],path=paths[name],meta=stateClass[META_KEY];this.addRuntimeInfoToMeta(meta,path),NG_DEV_MODE&&ensureStateClassIsInjectable(stateClass);const stateMap={name,path,isInitialised:!1,actions:meta.actions,instance:this._injector.get(stateClass),defaults:StateFactory._cloneDefaults(meta.defaults)};this.hasBeenMountedAndBootstrapped(name,path)||bootstrappedStores.push(stateMap),this.states.push(stateMap)}return bootstrappedStores}addAndReturnDefaults(stateClasses){const classes=stateClasses||[],mappedStores=this.add(classes);return{defaults:mappedStores.reduce(((result,mappedStore)=>setValue(result,mappedStore.path,mappedStore.defaults)),{}),states:mappedStores}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const dispatched$=new Subject.B;this._actionsSubscription=this._actions.pipe((0,filter.p)((ctx=>"DISPATCHED"===ctx.status)),(0,mergeMap.Z)((ctx=>{dispatched$.next(ctx);const action=ctx.action;return this.invokeActions(dispatched$,action).pipe((0,operators_map.T)((()=>({action,status:"SUCCESSFUL"}))),(0,defaultIfEmpty.U)({action,status:"CANCELED"}),catchError((error=>(0,of.of)({action,status:"ERRORED",error}))))}))).subscribe((ctx=>this._actionResults.next(ctx)))}invokeActions(dispatched$,action){const type=getActionTypeFromInstance(action),results=[];let actionHasBeenHandled=!1;for(const metadata of this.states){const actionMetas=metadata.actions[type];if(actionMetas)for(const actionMeta of actionMetas){const stateContext=this._stateContextFactory.createStateContext(metadata);try{let result=metadata.instance[actionMeta.fn](stateContext,action);result instanceof Promise&&(result=(0,from.H)(result)),isObservable(result)?(result=result.pipe((0,mergeMap.Z)((value=>value instanceof Promise?(0,from.H)(value):isObservable(value)?value:(0,of.of)(value))),(0,defaultIfEmpty.U)({})),actionMeta.options.cancelUncompleted&&(result=result.pipe(takeUntil(dispatched$.pipe(ofActionDispatched(action)))))):result=(0,of.of)({}).pipe(shareReplay()),results.push(result)}catch(e){results.push(throwError(e))}actionHasBeenHandled=!0}}if(NG_DEV_MODE&&!actionHasBeenHandled){const unhandledActionsLogger=this._injector.get(NgxsUnhandledActionsLogger,null);unhandledActionsLogger&&unhandledActionsLogger.warn(action)}return results.length||results.push((0,of.of)({})),forkJoin(results)}addToStatesMap(stateClasses){const newStates=[],statesMap=this.statesByName;for(const stateClass of stateClasses){const stateName=getStoreMetadata$1(stateClass).name;NG_DEV_MODE&&ensureStateNameIsUnique(stateName,stateClass,statesMap);!statesMap[stateName]&&(newStates.push(stateClass),statesMap[stateName]=stateClass)}return{newStates}}addRuntimeInfoToMeta(meta,path){this.statePaths[meta.name]=path,meta.path=path}hasBeenMountedAndBootstrapped(name,path){const valueIsBootstrappedInInitialState=void 0!==getValue(this._initialState,path);return this.statesByName[name]&&valueIsBootstrappedInInitialState}}function createRootSelectorFactory(selectorMetaData,selectors,memoizedSelectorFn){return context=>{const{argumentSelectorFunctions,selectorOptions}=function getRuntimeSelectorInfo(context,selectorMetaData,selectors=[]){const localSelectorOptions=selectorMetaData.getSelectorOptions(),selectorOptions=context.getSelectorOptions(localSelectorOptions),selectorsToApply=function getSelectorsToApply(selectors=[],selectorOptions,containerClass){const selectorsToApply=[],canInjectContainerState=0===selectors.length||selectorOptions.injectContainerState;if(containerClass&&canInjectContainerState){getStoreMetadata$1(containerClass)&&selectorsToApply.push(containerClass)}selectors&&selectorsToApply.push(...selectors);return selectorsToApply}(selectors,selectorOptions,selectorMetaData.containerClass),argumentSelectorFunctions=selectorsToApply.map((selector=>getRootSelectorFactory(selector)(context)));return{selectorOptions,argumentSelectorFunctions}}(context,selectorMetaData,selectors);return function selectFromRoot(rootState){const results=argumentSelectorFunctions.map((argFn=>argFn(rootState)));try{return memoizedSelectorFn(...results)}catch(ex){if(ex instanceof TypeError&&selectorOptions.suppressErrors)return;throw ex}}}}function getRootSelectorFactory(selector){const metadata=getSelectorMetadata$1(selector)||getStoreMetadata$1(selector);return metadata&&metadata.makeRootSelector||(()=>selector)}StateFactory.ɵfac=function StateFactory_Factory(t){return new(t||StateFactory)(core["ɵɵinject"](core.Injector),core["ɵɵinject"](NgxsConfig),core["ɵɵinject"](StateFactory,12),core["ɵɵinject"](InternalActions),core["ɵɵinject"](InternalDispatchedActionResults),core["ɵɵinject"](StateContextFactory),core["ɵɵinject"](INITIAL_STATE_TOKEN,8))},StateFactory.ɵprov=core["ɵɵdefineInjectable"]({token:StateFactory,factory:StateFactory.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](StateFactory,[{type:core.Injectable}],(function(){return[{type:core.Injector},{type:NgxsConfig},{type:StateFactory,decorators:[{type:core.Optional},{type:core.SkipSelf}]},{type:InternalActions},{type:InternalDispatchedActionResults},{type:StateContextFactory},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[INITIAL_STATE_TOKEN]}]}]}),null);class Store{constructor(_stateStream,_internalStateOperations,_config,_internalExecutionStrategy,_stateFactory,initialStateValue){this._stateStream=_stateStream,this._internalStateOperations=_internalStateOperations,this._config=_config,this._internalExecutionStrategy=_internalExecutionStrategy,this._stateFactory=_stateFactory,this._selectableStateStream=this._stateStream.pipe(leaveNgxs(this._internalExecutionStrategy),shareReplay({bufferSize:1,refCount:!0})),this.initStateStream(initialStateValue)}dispatch(actionOrActions){return this._internalStateOperations.getRootStateOperations().dispatch(actionOrActions)}select(selector){const selectorFn=this.getStoreBoundSelectorFn(selector);return this._selectableStateStream.pipe((0,operators_map.T)(selectorFn),catchError((err=>{const{suppressErrors}=this._config.selectorOptions;return err instanceof TypeError&&suppressErrors?(0,of.of)(void 0):throwError(err)})),function distinctUntilChanged(comparator,keySelector){return void 0===keySelector&&(keySelector=identity.D),comparator=null!=comparator?comparator:defaultCompare,(0,lift.N)((function(source,subscriber){var previousKey,first=!0;source.subscribe((0,OperatorSubscriber._)(subscriber,(function(value){var currentKey=keySelector(value);!first&&comparator(previousKey,currentKey)||(first=!1,previousKey=currentKey,subscriber.next(value))})))}))}(),leaveNgxs(this._internalExecutionStrategy))}selectOnce(selector){return this.select(selector).pipe((0,take.s)(1))}selectSnapshot(selector){return this.getStoreBoundSelectorFn(selector)(this._stateStream.getValue())}subscribe(fn){return this._selectableStateStream.pipe(leaveNgxs(this._internalExecutionStrategy)).subscribe(fn)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(state){return this._internalStateOperations.getRootStateOperations().setState(state)}getStoreBoundSelectorFn(selector){return getRootSelectorFactory(selector)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(initialStateValue){const value=this._stateStream.value;if(!value||0===Object.keys(value).length){const storeValues=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),initialStateValue):initialStateValue;this._stateStream.next(storeValues)}}}Store.ɵfac=function Store_Factory(t){return new(t||Store)(core["ɵɵinject"](StateStream),core["ɵɵinject"](InternalStateOperations),core["ɵɵinject"](NgxsConfig),core["ɵɵinject"](InternalNgxsExecutionStrategy),core["ɵɵinject"](StateFactory),core["ɵɵinject"](INITIAL_STATE_TOKEN,8))},Store.ɵprov=core["ɵɵdefineInjectable"]({token:Store,factory:Store.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](Store,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:StateStream},{type:InternalStateOperations},{type:NgxsConfig},{type:InternalNgxsExecutionStrategy},{type:StateFactory},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[INITIAL_STATE_TOKEN]}]}]}),null);class SelectFactory{constructor(store,config){SelectFactory.store=store,SelectFactory.config=config}ngOnDestroy(){SelectFactory.store=null,SelectFactory.config=null}}SelectFactory.store=null,SelectFactory.config=null,SelectFactory.ɵfac=function SelectFactory_Factory(t){return new(t||SelectFactory)(core["ɵɵinject"](Store),core["ɵɵinject"](NgxsConfig))},SelectFactory.ɵprov=core["ɵɵdefineInjectable"]({token:SelectFactory,factory:SelectFactory.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](SelectFactory,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Store},{type:NgxsConfig}]}),null);class LifecycleStateManager{constructor(_store,_internalErrorReporter,_internalStateOperations,_stateContextFactory,_bootstrapper){this._store=_store,this._internalErrorReporter=_internalErrorReporter,this._internalStateOperations=_internalStateOperations,this._stateContextFactory=_stateContextFactory,this._bootstrapper=_bootstrapper,this._destroy$=new Subject.B}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(action,results){this._internalStateOperations.getRootStateOperations().dispatch(action).pipe((0,filter.p)((()=>!!results)),(0,tap.M)((()=>this._invokeInitOnStates(results.states))),(0,mergeMap.Z)((()=>this._bootstrapper.appBootstrapped$)),(0,filter.p)((appBootstrapped=>!!appBootstrapped)),catchError((error=>(this._internalErrorReporter.reportErrorSafely(error),empty.w))),takeUntil(this._destroy$)).subscribe((()=>this._invokeBootstrapOnStates(results.states)))}_invokeInitOnStates(mappedStores){for(const mappedStore of mappedStores){const instance=mappedStore.instance;instance.ngxsOnChanges&&this._store.select((state=>getValue(state,mappedStore.path))).pipe(startWith(void 0),(0,lift.N)((function(source,subscriber){var prev,hasPrev=!1;source.subscribe((0,OperatorSubscriber._)(subscriber,(function(value){var p=prev;prev=value,hasPrev&&subscriber.next([p,value]),hasPrev=!0})))})),takeUntil(this._destroy$)).subscribe((([previousValue,currentValue])=>{const change=new NgxsSimpleChange(previousValue,currentValue,!mappedStore.isInitialised);instance.ngxsOnChanges(change)})),instance.ngxsOnInit&&instance.ngxsOnInit(this._getStateContext(mappedStore)),mappedStore.isInitialised=!0}}_invokeBootstrapOnStates(mappedStores){for(const mappedStore of mappedStores){const instance=mappedStore.instance;instance.ngxsAfterBootstrap&&instance.ngxsAfterBootstrap(this._getStateContext(mappedStore))}}_getStateContext(mappedStore){return this._stateContextFactory.createStateContext(mappedStore)}}LifecycleStateManager.ɵfac=function LifecycleStateManager_Factory(t){return new(t||LifecycleStateManager)(core["ɵɵinject"](Store),core["ɵɵinject"](InternalErrorReporter),core["ɵɵinject"](InternalStateOperations),core["ɵɵinject"](StateContextFactory),core["ɵɵinject"](NgxsBootstrapper))},LifecycleStateManager.ɵprov=core["ɵɵdefineInjectable"]({token:LifecycleStateManager,factory:LifecycleStateManager.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](LifecycleStateManager,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Store},{type:InternalErrorReporter},{type:InternalStateOperations},{type:StateContextFactory},{type:NgxsBootstrapper}]}),null);class NgxsRootModule{constructor(factory,internalStateOperations,_store,_select,states=[],lifecycleStateManager){const results=factory.addAndReturnDefaults(states);internalStateOperations.setStateToTheCurrentWithNew(results),factory.connectActionHandlers(),lifecycleStateManager.ngxsBootstrap(new InitState,results)}}NgxsRootModule.ɵfac=function NgxsRootModule_Factory(t){return new(t||NgxsRootModule)(core["ɵɵinject"](StateFactory),core["ɵɵinject"](InternalStateOperations),core["ɵɵinject"](Store),core["ɵɵinject"](SelectFactory),core["ɵɵinject"](ROOT_STATE_TOKEN,8),core["ɵɵinject"](LifecycleStateManager))},NgxsRootModule.ɵmod=core["ɵɵdefineNgModule"]({type:NgxsRootModule}),NgxsRootModule.ɵinj=core["ɵɵdefineInjector"]({}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsRootModule,[{type:core.NgModule}],(function(){return[{type:StateFactory},{type:InternalStateOperations},{type:Store},{type:SelectFactory},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[ROOT_STATE_TOKEN]}]},{type:LifecycleStateManager}]}),null);class NgxsFeatureModule{constructor(_store,internalStateOperations,factory,states=[],lifecycleStateManager){const flattenedStates=NgxsFeatureModule.flattenStates(states),results=factory.addAndReturnDefaults(flattenedStates);results.states.length&&(internalStateOperations.setStateToTheCurrentWithNew(results),lifecycleStateManager.ngxsBootstrap(new UpdateState(results.defaults),results))}static flattenStates(states=[]){return states.reduce(((total,values)=>total.concat(values)),[])}}NgxsFeatureModule.ɵfac=function NgxsFeatureModule_Factory(t){return new(t||NgxsFeatureModule)(core["ɵɵinject"](Store),core["ɵɵinject"](InternalStateOperations),core["ɵɵinject"](StateFactory),core["ɵɵinject"](FEATURE_STATE_TOKEN,8),core["ɵɵinject"](LifecycleStateManager))},NgxsFeatureModule.ɵmod=core["ɵɵdefineNgModule"]({type:NgxsFeatureModule}),NgxsFeatureModule.ɵinj=core["ɵɵdefineInjector"]({}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsFeatureModule,[{type:core.NgModule}],(function(){return[{type:Store},{type:InternalStateOperations},{type:StateFactory},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[FEATURE_STATE_TOKEN]}]},{type:LifecycleStateManager}]}),null);class NgxsModule{static forRoot(states=[],options={}){return{ngModule:NgxsRootModule,providers:[StateFactory,PluginManager,...states,...NgxsModule.ngxsTokenProviders(states,options)]}}static forFeature(states=[]){return{ngModule:NgxsFeatureModule,providers:[StateFactory,PluginManager,...states,{provide:FEATURE_STATE_TOKEN,multi:!0,useValue:states}]}}static ngxsTokenProviders(states,options){return[{provide:USER_PROVIDED_NGXS_EXECUTION_STRATEGY,useValue:options.executionStrategy},{provide:ROOT_STATE_TOKEN,useValue:states},{provide:ROOT_OPTIONS,useValue:options},{provide:core.APP_BOOTSTRAP_LISTENER,useFactory:NgxsModule.appBootstrapListenerFactory,multi:!0,deps:[NgxsBootstrapper]},{provide:ɵNGXS_STATE_CONTEXT_FACTORY,useExisting:StateContextFactory},{provide:ɵNGXS_STATE_FACTORY,useExisting:StateFactory}]}static appBootstrapListenerFactory(bootstrapper){return()=>bootstrapper.bootstrap()}}function Action(actions,options){return(target,name)=>{if("undefined"==typeof ngDevMode||ngDevMode){target.hasOwnProperty("prototype")&&function throwActionDecoratorError(){throw new Error("@Action() decorator cannot be used with static methods.")}()}const meta=ensureStoreMetadata$1(target.constructor);Array.isArray(actions)||(actions=[actions]);for(const action of actions){const type=action.type;meta.actions[type]||(meta.actions[type]=[]),meta.actions[type].push({fn:name,options:options||{},type})}}}function State(options){return target=>{const stateClass=target,meta=ensureStoreMetadata$1(stateClass),inheritedStateClass=Object.getPrototypeOf(stateClass),optionsWithInheritance=function getStateOptions(inheritedStateClass,options){const inheritanceOptions=inheritedStateClass[META_OPTIONS_KEY]||{};return Object.assign(Object.assign({},inheritanceOptions),options)}(inheritedStateClass,options);!function mutateMetaData(params){const{meta,inheritedStateClass,optionsWithInheritance}=params,{children,defaults,name}=optionsWithInheritance,stateName="string"==typeof name?name:name&&name.getName()||null;("undefined"==typeof ngDevMode||ngDevMode)&&ensureStateNameIsValid(stateName);if(inheritedStateClass.hasOwnProperty(META_KEY)){const inheritedMeta=inheritedStateClass[META_KEY]||{};meta.actions=Object.assign(Object.assign({},meta.actions),inheritedMeta.actions)}meta.children=children,meta.defaults=defaults,meta.name=stateName}({meta,inheritedStateClass,optionsWithInheritance}),stateClass[META_OPTIONS_KEY]=optionsWithInheritance}}NgxsModule.ɵfac=function NgxsModule_Factory(t){return new(t||NgxsModule)},NgxsModule.ɵmod=core["ɵɵdefineNgModule"]({type:NgxsModule}),NgxsModule.ɵinj=core["ɵɵdefineInjector"]({}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsModule,[{type:core.NgModule}],null,null);const selectorOptionsMetaAccessor={getOptions:target=>target&&target.NGXS_SELECTOR_OPTIONS_META||{},defineOptions:(target,options)=>{target&&(target.NGXS_SELECTOR_OPTIONS_META=options)}};function setupSelectorMetadata(originalFn,creationMetadata){const selectorMetaData=ensureSelectorMetadata$1(originalFn);selectorMetaData.originalFn=originalFn;let getExplicitSelectorOptions=()=>({});creationMetadata&&(selectorMetaData.containerClass=creationMetadata.containerClass,selectorMetaData.selectorName=creationMetadata.selectorName||null,getExplicitSelectorOptions=creationMetadata.getSelectorOptions||getExplicitSelectorOptions);const selectorMetaDataClone=Object.assign({},selectorMetaData);return selectorMetaData.getSelectorOptions=()=>function getLocalSelectorOptions(selectorMetaData,explicitOptions){return Object.assign(Object.assign(Object.assign(Object.assign({},selectorOptionsMetaAccessor.getOptions(selectorMetaData.containerClass)||{}),selectorOptionsMetaAccessor.getOptions(selectorMetaData.originalFn)||{}),selectorMetaData.getSelectorOptions()||{}),explicitOptions)}(selectorMetaDataClone,getExplicitSelectorOptions()),selectorMetaData}function createSelector(selectors,projector,creationMetadata){const memoizedFn=function createMemoizedSelectorFn(originalFn,creationMetadata){const containerClass=creationMetadata&&creationMetadata.containerClass,memoizedFn=memoize((function wrappedSelectorFn(...args){const returnValue=originalFn.apply(containerClass,args);return returnValue instanceof Function?memoize.apply(null,[returnValue]):returnValue}));return Object.setPrototypeOf(memoizedFn,originalFn),memoizedFn}(projector,creationMetadata),selectorMetaData=setupSelectorMetadata(projector,creationMetadata);return selectorMetaData.makeRootSelector=createRootSelectorFactory(selectorMetaData,selectors,memoizedFn),memoizedFn}function Selector(selectors){return(target,key,descriptor)=>{descriptor||(descriptor=Object.getOwnPropertyDescriptor(target,key));const originalFn=null==descriptor?void 0:descriptor.value;("undefined"==typeof ngDevMode||ngDevMode)&&originalFn&&"function"!=typeof originalFn&&function throwSelectorDecoratorError(){throw new Error("Selectors only work on methods.")}();const memoizedFn=createSelector(selectors,originalFn,{containerClass:target,selectorName:key.toString(),getSelectorOptions:()=>({})}),newDescriptor={configurable:!0,get:()=>memoizedFn};return newDescriptor.originalFn=originalFn,newDescriptor}}class NgxsDevelopmentModule{static forRoot(options){return{ngModule:NgxsDevelopmentModule,providers:[NgxsUnhandledActionsLogger,{provide:NGXS_DEVELOPMENT_OPTIONS,useValue:options}]}}}NgxsDevelopmentModule.ɵfac=function NgxsDevelopmentModule_Factory(t){return new(t||NgxsDevelopmentModule)},NgxsDevelopmentModule.ɵmod=core["ɵɵdefineNgModule"]({type:NgxsDevelopmentModule}),NgxsDevelopmentModule.ɵinj=core["ɵɵdefineInjector"]({}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](NgxsDevelopmentModule,[{type:core.NgModule}],null,null)}}]);